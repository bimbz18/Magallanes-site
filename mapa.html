
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Magallanes Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <style>
    html, body, #map {
      height: 100%;
      margin: 0;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const data = JSON.parse(decodeURIComponent(urlParams.get("data") || "[]"));

    const cityCoords = {
      "Tokyo": [35.6762, 139.6503],
      "Kyoto": [35.0116, 135.7681],
      "Osaka": [34.6937, 135.5023],
      "Sapporo": [43.0621, 141.3544],
      "Nara": [34.6851, 135.8048],
      "Hakone": [35.2329, 139.1066],
      "New York": [40.7128, -74.0060],
      "Los Angeles": [34.0522, -118.2437],
      "Chicago": [41.8781, -87.6298],
      "Miami": [25.7617, -80.1918],
      "Dallas": [32.7767, -96.7970],
      "Atlanta": [33.7490, -84.3880],
      "Washington": [38.9072, -77.0369],
      "San Francisco": [37.7749, -122.4194],
      "Toronto": [43.651070, -79.347015],
      "MÃ©rida": [20.9674, -89.5926],
      "Lisbon": [38.7169, -9.1399],
      "Buenos Aires": [-34.6037, -58.3816],
      "Paris": [48.8566, 2.3522],
      "London": [51.5074, -0.1278],
      "Madrid": [40.4168, -3.7038],
      "Berlin": [52.52, 13.405],
      "Mexico City": [19.4326, -99.1332],
      "Indio": [33.7207, -116.2156],
      "Augusta": [33.4735, -82.0105],
      "Fort Lauderdale": [26.1224, -80.1373],
      "New Orleans": [29.9511, -90.0715]
    };

    const map = L.map("map").setView([20, 0], 2);

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    data.forEach(function(entry) {
      const coords = cityCoords[entry.city];
      if (!coords) {
        console.warn("Ciudad sin coordenadas:", entry.city);
        return;
      }
      L.marker(coords).addTo(map).bindPopup(entry.city + ", " + entry.country);
    });
  </script>
</body>
</html>
